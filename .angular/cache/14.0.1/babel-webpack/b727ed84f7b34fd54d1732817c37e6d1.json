{"ast":null,"code":"import { map } from 'rxjs/operators';\nimport * as moment from 'moment';\nimport { KapparuGridComponent } from 'src/app/shared/kapparu-grid/kapparu-grid.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/services/merger.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"ag-grid-angular\";\nimport * as i6 from \"@angular/material/form-field\";\nimport * as i7 from \"@angular/material/input\";\nimport * as i8 from \"@angular/forms\";\n\nconst _c0 = function (a0) {\n  return [a0];\n};\n\nfunction MergersEditorComponent_div_67_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"ag-grid-angular\", 0);\n    i0.ɵɵlistener(\"gridReady\", function MergersEditorComponent_div_67_Template_ag_grid_angular_gridReady_1_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.onGridReady($event));\n    })(\"rowDataChanged\", function MergersEditorComponent_div_67_Template_ag_grid_angular_rowDataChanged_1_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.onRowDataChanged($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"span\", 8);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"br\");\n    i0.ɵɵelementStart(5, \"button\", 4);\n    i0.ɵɵlistener(\"click\", function MergersEditorComponent_div_67_Template_button_click_5_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const mergerJournal_r1 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.deleteMergerJournal(mergerJournal_r1));\n    });\n    i0.ɵɵtext(6, \"Delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"button\", 4);\n    i0.ɵɵlistener(\"click\", function MergersEditorComponent_div_67_Template_button_click_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const mergerJournal_r1 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.editMergerJournal(mergerJournal_r1));\n    });\n    i0.ɵɵtext(8, \"Edit...\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const mergerJournal_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"rowData\", i0.ɵɵpureFunction1(3, _c0, mergerJournal_r1))(\"columnDefs\", ctx_r0.columnDefsJournal);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(mergerJournal_r1.entry);\n  }\n}\n\nexport let MergersEditorComponent = /*#__PURE__*/(() => {\n  class MergersEditorComponent extends KapparuGridComponent {\n    constructor(http, route, mergerService) {\n      super();\n      this.http = http;\n      this.route = route;\n      this.mergerService = mergerService;\n      this.mergerJournals = []; // Inputs\n\n      this.mergerJournalId = 0;\n      this.entry = \"\";\n      this.columnDefs = [{\n        headerName: 'ID',\n        field: 'id',\n        hide: true\n      }, this.colUpdateDate, {\n        headerName: 'Target',\n        field: 'targetTicker'\n      }, {\n        headerName: 'Description',\n        field: 'targetDescription'\n      }, {\n        headerName: 'Acquirer',\n        field: 'acquirerTicker'\n      }, {\n        headerName: 'Description',\n        field: 'acquirerDescription'\n      }, {\n        headerName: 'Price',\n        field: 'price',\n        cellStyle: {\n          textAlign: \"right\"\n        },\n        valueFormatter: this.currencyFormatter\n      }, {\n        headerName: 'Net',\n        field: 'marketNetReturn',\n        cellStyle: {\n          textAlign: \"right\"\n        },\n        valueFormatter: this.percentFormatter\n      }, this.colMergersNetAnnualized, {\n        headerName: 'Positive',\n        field: 'marketPositiveReturn',\n        cellStyle: {\n          textAlign: \"right\"\n        },\n        valueFormatter: this.percentFormatter\n      }, {\n        headerName: 'Annualized',\n        field: 'marketPositiveReturnAnnualized',\n        cellStyle: {\n          textAlign: \"right\"\n        },\n        valueFormatter: this.percentFormatter\n      }, {\n        headerName: 'Confidence',\n        field: 'confidence',\n        cellStyle: {\n          textAlign: \"right\"\n        },\n        valueFormatter: this.percentFormatter\n      }, {\n        headerName: 'Close',\n        field: 'closeDate',\n        valueFormatter: this.dateFormatter\n      }];\n      this.columnDefsJournal = [{\n        headerName: 'ID',\n        field: 'id',\n        hide: true\n      }, this.colDate, {\n        headerName: 'Target',\n        field: 'targetTicker'\n      }, {\n        headerName: 'Description',\n        field: 'targetDescription'\n      }, {\n        headerName: 'Acquirer',\n        field: 'acquirerTicker'\n      }, {\n        headerName: 'Description',\n        field: 'acquirerDescription'\n      }, {\n        headerName: 'Price',\n        field: 'price',\n        cellStyle: {\n          textAlign: \"right\"\n        },\n        valueFormatter: this.currencyFormatter\n      }, {\n        headerName: 'Net',\n        field: 'marketNetReturn',\n        cellStyle: {\n          textAlign: \"right\"\n        },\n        valueFormatter: this.percentFormatter\n      }, this.colMergersNetAnnualized, {\n        headerName: 'Positive',\n        field: 'marketPositiveReturn',\n        cellStyle: {\n          textAlign: \"right\"\n        },\n        valueFormatter: this.percentFormatter\n      }, {\n        headerName: 'Annualized',\n        field: 'marketPositiveReturnAnnualized',\n        cellStyle: {\n          textAlign: \"right\"\n        },\n        valueFormatter: this.percentFormatter\n      }, {\n        headerName: 'Confidence',\n        field: 'confidence',\n        cellStyle: {\n          textAlign: \"right\"\n        },\n        valueFormatter: this.percentFormatter\n      }, {\n        headerName: 'Close',\n        field: 'closeDate',\n        valueFormatter: this.dateFormatter\n      }];\n    }\n\n    ngOnInit() {\n      this.id = this.route.snapshot.paramMap.get('id');\n      this.rowData = this.http.get('http://localhost:8081/blue-lion/read/enriched-mergers/' + this.id).pipe(map(receivedData => {\n        this.date = moment().format(\"YYYY-MM-DD\");\n        this.confidence = receivedData.confidence;\n        this.acquirerRefDataId = receivedData.acquirerRefDataId;\n        this.targetRefDataId = receivedData.targetRefDataId;\n        this.dealPrice = receivedData.dealPrice;\n        this.failPrice = receivedData.failPrice;\n        this.breakPrice = receivedData.breakPrice;\n        this.announceDate = receivedData.announceDate;\n        this.meetingDate = receivedData.meetingDate;\n        this.closeDate = receivedData.closeDate;\n        this.breakDate = receivedData.breakDate;\n        this.dividends = receivedData.dividends;\n        return Array.of(receivedData);\n      }));\n      this.http.get('http://localhost:8081/blue-lion/read/enriched-mergers-journal?mergerId=' + this.id).subscribe(mergerJournals => this.mergerJournals = mergerJournals);\n    }\n\n    updateMerger() {\n      const that = this;\n      this.mergerService.updateMerger({\n        id: +this.id,\n        date: this.date,\n        acquirerRefDataId: this.acquirerRefDataId,\n        targetRefDataId: this.targetRefDataId,\n        dealPrice: this.dealPrice,\n        failPrice: this.failPrice,\n        breakPrice: this.breakPrice,\n        announceDate: this.announceDate,\n        meetingDate: this.meetingDate,\n        closeDate: this.closeDate,\n        breakDate: this.breakDate,\n        confidence: this.confidence,\n        dividends: this.dividends\n      }).subscribe({\n        next(m) {\n          that.ngOnInit();\n        }\n\n      });\n    }\n\n    addMergerJournal() {\n      const that = this;\n\n      if (this.mergerJournalId == 0) {\n        this.mergerService.addMergerJournal({\n          mergerId: +this.id,\n          date: this.date,\n          entry: this.entry\n        }).subscribe({\n          next(m) {\n            that.clearMergerJournal();\n            that.ngOnInit();\n          }\n\n        });\n      } else {\n        this.mergerService.updateMergerJournal({\n          id: this.mergerJournalId,\n          entry: this.entry\n        }).subscribe({\n          next(m) {\n            that.clearMergerJournal();\n            that.ngOnInit();\n          }\n\n        });\n      }\n    }\n\n    deleteMergerJournal(mergerJournal) {\n      const that = this;\n      this.mergerService.deleteMergerJournal({\n        id: mergerJournal.id\n      }).subscribe({\n        next(m) {\n          that.ngOnInit();\n        }\n\n      });\n    }\n\n    editMergerJournal(mergerJournal) {\n      // This is not a server txn, we're just updating the ui edit box\n      this.entry = mergerJournal.entry;\n      this.mergerJournalId = mergerJournal.id;\n    }\n\n    clearMergerJournal() {\n      // This is not a server txn, we're just updating the ui edit box\n      this.entry = \"\";\n      this.mergerJournalId = 0;\n    }\n\n  }\n\n  MergersEditorComponent.ɵfac = function MergersEditorComponent_Factory(t) {\n    return new (t || MergersEditorComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.MergerService));\n  };\n\n  MergersEditorComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MergersEditorComponent,\n    selectors: [[\"app-mergers-editor\"]],\n    inputs: {\n      mergerJournalId: \"mergerJournalId\",\n      entry: \"entry\",\n      date: \"date\",\n      acquirerRefDataId: \"acquirerRefDataId\",\n      targetRefDataId: \"targetRefDataId\",\n      dealPrice: \"dealPrice\",\n      failPrice: \"failPrice\",\n      breakPrice: \"breakPrice\",\n      announceDate: \"announceDate\",\n      meetingDate: \"meetingDate\",\n      closeDate: \"closeDate\",\n      breakDate: \"breakDate\",\n      confidence: \"confidence\",\n      dividends: \"dividends\"\n    },\n    features: [i0.ɵɵInheritDefinitionFeature],\n    decls: 68,\n    vars: 16,\n    consts: [[1, \"ag-theme-alpine\", 2, \"width\", \"100%\", \"height\", \"53px\", 3, \"rowData\", \"columnDefs\", \"gridReady\", \"rowDataChanged\"], [\"appearance\", \"outline\"], [\"type\", \"number\", \"matInput\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"string\", \"matInput\", \"\", 3, \"ngModel\", \"ngModelChange\"], [3, \"click\"], [\"appearance\", \"outline\", 2, \"width\", \"98vw\"], [\"matInput\", \"\", 3, \"ngModel\", \"ngModelChange\"], [4, \"ngFor\", \"ngForOf\"], [2, \"display\", \"inline-block\", \"margin\", \"20px\", \"white-space\", \"pre-wrap\"]],\n    template: function MergersEditorComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ag-grid-angular\", 0);\n        i0.ɵɵlistener(\"gridReady\", function MergersEditorComponent_Template_ag_grid_angular_gridReady_0_listener($event) {\n          return ctx.onGridReady($event);\n        })(\"rowDataChanged\", function MergersEditorComponent_Template_ag_grid_angular_rowDataChanged_0_listener($event) {\n          return ctx.onRowDataChanged($event);\n        });\n        i0.ɵɵpipe(1, \"async\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"table\")(3, \"tr\")(4, \"td\")(5, \"mat-form-field\", 1)(6, \"mat-label\");\n        i0.ɵɵtext(7, \"confidence\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"input\", 2);\n        i0.ɵɵlistener(\"ngModelChange\", function MergersEditorComponent_Template_input_ngModelChange_8_listener($event) {\n          return ctx.confidence = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(9, \"td\")(10, \"mat-form-field\", 1)(11, \"mat-label\");\n        i0.ɵɵtext(12, \"dividends\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"input\", 2);\n        i0.ɵɵlistener(\"ngModelChange\", function MergersEditorComponent_Template_input_ngModelChange_13_listener($event) {\n          return ctx.dividends = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(14, \"td\")(15, \"mat-form-field\", 1)(16, \"mat-label\");\n        i0.ɵɵtext(17, \"closeDate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"input\", 3);\n        i0.ɵɵlistener(\"ngModelChange\", function MergersEditorComponent_Template_input_ngModelChange_18_listener($event) {\n          return ctx.closeDate = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(19, \"td\")(20, \"mat-form-field\", 1)(21, \"mat-label\");\n        i0.ɵɵtext(22, \"breakPrice\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"input\", 2);\n        i0.ɵɵlistener(\"ngModelChange\", function MergersEditorComponent_Template_input_ngModelChange_23_listener($event) {\n          return ctx.breakPrice = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(24, \"td\")(25, \"mat-form-field\", 1)(26, \"mat-label\");\n        i0.ɵɵtext(27, \"breakDate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"input\", 3);\n        i0.ɵɵlistener(\"ngModelChange\", function MergersEditorComponent_Template_input_ngModelChange_28_listener($event) {\n          return ctx.breakDate = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(29, \"td\")(30, \"mat-form-field\", 1)(31, \"mat-label\");\n        i0.ɵɵtext(32, \"dealPrice\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(33, \"input\", 2);\n        i0.ɵɵlistener(\"ngModelChange\", function MergersEditorComponent_Template_input_ngModelChange_33_listener($event) {\n          return ctx.dealPrice = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(34, \"td\")(35, \"mat-form-field\", 1)(36, \"mat-label\");\n        i0.ɵɵtext(37, \"failPrice\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(38, \"input\", 2);\n        i0.ɵɵlistener(\"ngModelChange\", function MergersEditorComponent_Template_input_ngModelChange_38_listener($event) {\n          return ctx.failPrice = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(39, \"td\")(40, \"mat-form-field\", 1)(41, \"mat-label\");\n        i0.ɵɵtext(42, \"announceDate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(43, \"input\", 3);\n        i0.ɵɵlistener(\"ngModelChange\", function MergersEditorComponent_Template_input_ngModelChange_43_listener($event) {\n          return ctx.announceDate = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(44, \"td\")(45, \"mat-form-field\", 1)(46, \"mat-label\");\n        i0.ɵɵtext(47, \"meetingDate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(48, \"input\", 3);\n        i0.ɵɵlistener(\"ngModelChange\", function MergersEditorComponent_Template_input_ngModelChange_48_listener($event) {\n          return ctx.meetingDate = $event;\n        });\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(49, \"tr\")(50, \"td\")(51, \"button\", 4);\n        i0.ɵɵlistener(\"click\", function MergersEditorComponent_Template_button_click_51_listener() {\n          return ctx.updateMerger();\n        });\n        i0.ɵɵtext(52, \"Update Merger\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(53, \"table\")(54, \"tr\")(55, \"td\");\n        i0.ɵɵtext(56);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(57, \"tr\")(58, \"td\")(59, \"mat-form-field\", 5)(60, \"textarea\", 6);\n        i0.ɵɵlistener(\"ngModelChange\", function MergersEditorComponent_Template_textarea_ngModelChange_60_listener($event) {\n          return ctx.entry = $event;\n        });\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(61, \"tr\")(62, \"td\")(63, \"button\", 4);\n        i0.ɵɵlistener(\"click\", function MergersEditorComponent_Template_button_click_63_listener() {\n          return ctx.addMergerJournal();\n        });\n        i0.ɵɵtext(64, \"Update Journal Entry\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(65, \"button\", 4);\n        i0.ɵɵlistener(\"click\", function MergersEditorComponent_Template_button_click_65_listener() {\n          return ctx.clearMergerJournal();\n        });\n        i0.ɵɵtext(66, \"Clear\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵtemplate(67, MergersEditorComponent_div_67_Template, 9, 5, \"div\", 7);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"rowData\", i0.ɵɵpipeBind1(1, 14, ctx.rowData))(\"columnDefs\", ctx.columnDefs);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngModel\", ctx.confidence);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.dividends);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.closeDate);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.breakPrice);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.breakDate);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.dealPrice);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.failPrice);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.announceDate);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.meetingDate);\n        i0.ɵɵadvance(8);\n        i0.ɵɵtextInterpolate1(\"Jounral Entry: \", ctx.mergerJournalId, \"\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.entry);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngForOf\", ctx.mergerJournals);\n      }\n    },\n    dependencies: [i4.NgForOf, i5.AgGridAngular, i6.MatFormField, i6.MatLabel, i7.MatInput, i8.DefaultValueAccessor, i8.NumberValueAccessor, i8.NgControlStatus, i8.NgModel, i4.AsyncPipe],\n    styles: [\"label[_ngcontent-%COMP%]{display:block;width:6em;margin:.5em 0;color:#607d8b;font-weight:700}input[_ngcontent-%COMP%]{height:2em;font-size:1em;padding-left:.4em}\"]\n  });\n  return MergersEditorComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}